<!DOCTYPE html>
<html lang="en" th:lang="${#locale.language}"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title th:text="#{service_delete_confirm.title}">Services list</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
          type="text/css" th:href="@{/webjars/bootstrap/css/bootstrap.min.css}">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" rel="stylesheet"
          type="text/css" th:href="@{/webjars/font-awesome/css/all.min.css}">
    <link href="../static/css/style.css" rel="stylesheet" type="text/css" th:href="@{/css/style.css}">
</head>
<body>
<!-- NAVBAR -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container">
        <a href="#" class="navbar-brand" th:href="@{/}"> <!-- TODO: admin link -->
            <img src="../static/img/logo.png" th:src="@{/img/logo.png}" class="navbar-logo" alt="Logo"/>
            <span class="m-3" th:text="#{nav.title}">List of Services</span>
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse flex-row-reverse" id="navbarNav">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" th:classappend="${site == 'home'} ? 'active'" aria-current="page" href="#" th:href="@{/}" th:text="#{nav.link.home}">Home</a>
                </li>
                <li class="nav-item" sec:authorize="hasRole('ROLE_ADMIN')">
                    <a class="nav-link" href="#" th:classappend="${site == 'create'} ? 'active'" th:href="@{/admin/create}" th:text="#{nav.link.create_entry}">Create entry</a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button" data-bs-toggle="dropdown" aria-expanded="false" th:text="#{nav.link.language}">
                        Language
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink"
                        th:with="urlBuilder=${T(org.springframework.web.servlet.support.ServletUriComponentsBuilder).fromCurrentRequest()}">
                        <li th:each="locale_key : ${locales}">
                            <a class="dropdown-item" href="#" th:text="#{'nav.locale.' + ${locale_key}}"
                               th:href="${urlBuilder.replaceQueryParam('locale', locale_key).toUriString()}">English</a>
                        </li>
                    </ul>
                </li>
                <li class="nav-item" sec:authorize="!isAuthenticated()">
                    <a class="btn btn-outline btn-outline-secondary" href="#" th:href="@{/login_init}" th:text="#{nav.link.admin}">Admin login</a>
                </li>
                <li class="nav-item" sec:authorize="isAuthenticated()">
                    <form action="#" th:action="@{/logout}" method="POST">
                        <button class="btn btn-outline btn-outline-secondary" type="submit" th:text="#{nav.link.logout}">Logout</button>
                    </form>
                </li>
            </ul>
        </div>
    </div>
</nav>
<div class="container" th:object="${service}">
    <!-- HEADER -->
    <header class="row mt-3 mb-3">
        <div class="col-12" th:with="name=${service.name?.getOrDefault(#locale.language, null) ?: service.name?.getOrDefault(defaultLocale, null)},notdefined=#{not_defined_text}">
            <h2 th:text="#{service_delete_confirm.header.heading(${service.id}, ${name ?: notdefined})}">Service #1: Test service</h2>
            <p th:text="${service.description?.getOrDefault(#locale.language, null)} ?: ${service.description?.getOrDefault(defaultLocale, notdefined)}">Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Sed convallis magna eu sem. Mauris tincidunt sem sed arcu. In rutrum. In sem justo, commodo ut, suscipit at, pharetra vitae, orci. Integer imperdiet lectus quis justo. Phasellus rhoncus. Pellentesque sapien. Etiam egestas wisi a erat. Donec ipsum massa, ullamcorper in, auctor et, scelerisque sed, est. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
        </div>
        <div class="col-12">
            <hr/>
        </div>
    </header>
    <!-- MAIN CONTENT -->
    <div class="row">
        <div class="col-12">
            <p class="text-center" th:text="#{service_delete.confirm.form.heading}">You are about to delete this service. Do you want to proceed?</p>
        </div>
        <div class="col-12">
            <div class="row">
                <form action="#" method="POST" class="col-12 col-sm-6 col-md-3 offset-md-3 d-grid mb-2" th:action="@{/admin/remove/{id}(id=${service.id})}">
                    <input type="hidden" name="confirmation" value="yes">
                    <input type="submit" class="btn btn-success" name="submit" th:value="#{service_delete.confirm.form.button_yes}">
                </form>
                <form action="#" method="POST"  class="col-12 col-sm-6 col-md-3 d-grid mb-2" th:action="@{/admin/remove/{id}(id=${service.id})}">
                    <input type="hidden" name="confirmation" value="no">
                    <input type="submit" class="btn btn-danger" name="submit" th:value="#{service_delete.confirm.form.button_no}">
                </form>
            </div>
        </div>
    </div>
</div>
<!-- FOOTER -->
<footer class="text-light bg-dark mt-5">
    <div class="container">
        <div class="aclr">
            <div class="col">
                <div>
                    <p id="eu" class="small">This project has received funding from the European Unionâ€™s Horizon 2020 research and innovation programme under grant agreement No 654248.</p>
                </div>
            </div>
            <ul class="nav">
                <li class="nav-item">
                    <a class="nav-link" href="/contact.html">Contact</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/imprint.html">Imprint</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/privacy-policy.html">Privacy policy</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/ls-login.html">LS Login</a>
                </li>
            </ul>
        </div>
    </div>
</footer>
</body>
<!-- SCRIPTS -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"
        th:src="@{/webjars/jquery/jquery.min.js}"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        th:src="@{/webjars/bootstrap/js/bootstrap.min.js}"></script>
<script type="text/javascript" src="../static/js/script.js" th:src="@{/js/script.js}"></script>
</html>