<!doctype html>
<html lang="en" th:lang="${#locale}">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title th:text="#{services_list.title}">Services list</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
          type="text/css" th:href="@{/webjars/bootstrap/css/bootstrap.min.css}">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" rel="stylesheet"
          type="text/css" th:href="@{/webjars/font-awesome/css/all.min.css}">
    <link href="../static/css/style.css" rel="stylesheet" type="text/css" th:href="@{/css/style.css}">
</head>
<body>
<!-- NAVBAR -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container">
        <a href="#" class="navbar-brand" th:href="@{/}"> <!-- TODO: admin link -->
            <img src="../static/img/logo.png" th:src="@{/img/logo.png}" class="navbar-logo" alt="Logo"/>
            <span class="m-3" th:text="#{nav.title}">List of Services</span>
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse flex-row-reverse" id="navbarNav">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link active" aria-current="page" href="#" th:href="@{/}" th:text="#{nav.link.home}">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" th:href="@{/admin}" th:text="#{nav.link.admin}">Admin</a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button" data-bs-toggle="dropdown" aria-expanded="false" th:text="#{nav.link.language}">
                        Language
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink"
                        th:with="urlBuilder=${T(org.springframework.web.servlet.support.ServletUriComponentsBuilder).fromCurrentRequest()}">
                        <li th:each="locale_key : ${locales}">
                            <a class="dropdown-item" href="#" th:text="#{'nav.locale.' + ${locale_key}}"
                               th:href="${urlBuilder.replaceQueryParam('locale', locale_key).toUriString()}">English</a>
                        </li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</nav>
<div class="container">
    <!-- HEADER -->
    <header class="row mt-3 mb-1">
        <h1 class="col-12 text-center" th:text="#{services_list.header.heading}">List of Services</h1>
        <p th:text="#{services_list.header.text}">Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Sed convallis magna eu sem. Mauris tincidunt sem sed arcu. In rutrum. In sem justo, commodo ut, suscipit at, pharetra vitae, orci. Integer imperdiet lectus quis justo. Phasellus rhoncus. Pellentesque sapien. Etiam egestas wisi a erat. Donec ipsum massa, ullamcorper in, auctor et, scelerisque sed, est. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
    </header>

    <!-- MAIN CONTENT -->
    <div class="row"> <!-- TODO: only for admins -->
        <div class="col-12 col-sm-2 offset-sm-10 mb-2 d-grid">
            <a href="#" class="btn btn-primary" th:href="@{/admin/create}" th:text="#{services_list.button.add_new}">Add new entry</a>
        </div>
    </div>
    <div class="table-responsive">
        <table class="table table-hover">
            <thead class="table-dark">
                <tr>
                    <th scope="col">#</th> <!-- TODO: only for admins -->
                    <th scope="col" th:text="#{services_list.table.header.name}">Name</th>
                    <th scope="col" th:text="#{services_list.table.header.description}">Short description</th>
                    <th scope="col" th:text="#{services_list.table.header.organization}">Providing organization</th>
                </tr>
            </thead>
            <tbody>
                <tr th:if="${services == null or #lists.size(services) == 0}">
                    <td colspan="4" class="text-center text-muted" th:text="#{services_list.table.no_items}">No items found...</td>
                </tr>
                <tr class='clickable-row' th:unless="${services == null and #lists.size(services) == 0}"
                    th:each="service: ${services}" th:data-href="@{/{id}(id=${service.id})}"
                    th:with="name=${service.name?.getOrDefault(#locale.language, null) ?: service.name?.getOrDefault(defaultLocale, null)},
                    description=${service.description?.getOrDefault(#locale.language, null) ?: service.description?.getOrDefault(defaultLocale, null)},
                    providingOrganization=${service.providingOrganization?.getOrDefault(#locale.language, null) ?: service.providingOrganization?.getOrDefault(defaultLocale, null)},
                    notdefined=#{not_defined_text}">
                    <td th:text="${service.id}">1</td> <!-- TODO: only for admins -->
                    <td th:text="${name}">Service name</td>
                    <td th:text="${description}">Desc1</td>
                    <td th:text="${providingOrganization}">ELIXIR-CZ</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
<!-- FOOTER -->
<footer class="text-light bg-dark mt-5">
    <div class="container">
        <div class="aclr">
            <div class="col">
                <div>
                    <p id="eu" class="small">This project has received funding from the European Unionâ€™s Horizon 2020 research and innovation programme under grant agreement No 654248.</p>
                </div>
            </div>
            <ul class="nav">
                <li class="nav-item">
                    <a class="nav-link" href="/contact.html">Contact</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/imprint.html">Imprint</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/privacy-policy.html">Privacy policy</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/ls-login.html">LS Login</a>
                </li>
            </ul>
        </div>
    </div>
</footer>
</body>
<!-- SCRIPTS -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"
        th:src="@{/webjars/jquery/jquery.min.js}"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        th:src="@{/webjars/bootstrap/js/bootstrap.min.js}"></script>
<script type="text/javascript" src="../static/js/script.js" th:src="@{/js/script.js}"></script>
<script type="text/javascript" src="../static/js/services_list.js" th:src="@{/js/services_list.js}"></script>
</html>